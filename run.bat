@echo off
chcp 65001 >nul
color 0A
title ğŸš€ RUN BOOKSTORE MANAGEMENT

echo.
echo   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
echo   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•
echo   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  
echo   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•— â•šâ•â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•  
echo   â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
echo   â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•â•    â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•   â•šâ•â•    â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•
echo.
echo                           ğŸª BOOKSTORE MANAGEMENT SYSTEM ğŸª
echo                              Káº¿t ná»‘i vá»›i MySQL XAMPP
echo.
echo ========================================================================
echo [1/4] Kiá»ƒm tra mÃ´i trÆ°á»ng Java...
REM Kiá»ƒm tra Java
java -version >nul 2>&1
if %errorlevel% neq 0 (
    echo âŒ Java khÃ´ng tÃ¬m tháº¥y!
    echo ğŸ’¡ Vui lÃ²ng cÃ i Ä‘áº·t Java JDK 11 trá»Ÿ lÃªn
    echo ï¿½ Táº£i tá»«: https://www.oracle.com/java/technologies/downloads/
    pause
    exit /b 1
)
echo âœ… Java OK

echo [2/4] Kiá»ƒm tra MySQL JDBC Driver...
if not exist "lib\mysql-connector-j-8.0.33.jar" (
    echo âŒ MySQL JDBC Driver khÃ´ng tÃ¬m tháº¥y!
    echo ğŸ’¡ Äang tá»± Ä‘á»™ng táº£i...
    powershell -Command "Invoke-WebRequest -Uri 'https://repo1.maven.org/maven2/com/mysql/mysql-connector-j/8.0.33/mysql-connector-j-8.0.33.jar' -OutFile 'lib\mysql-connector-j-8.0.33.jar'"
    if exist "lib\mysql-connector-j-8.0.33.jar" (
        echo âœ… ÄÃ£ táº£i MySQL JDBC Driver thÃ nh cÃ´ng
    ) else (
        echo âŒ KhÃ´ng thá»ƒ táº£i JDBC Driver
        pause
        exit /b 1
    )
) else (
    echo âœ… MySQL JDBC Driver OK
)

echo [3/4] Kiá»ƒm tra MySQL Server (XAMPP)...
netstat -an | findstr :3306 >nul
if %errorlevel% neq 0 (
    echo âŒ MySQL Server khÃ´ng cháº¡y!
    echo.
    echo ğŸ’¡ Vui lÃ²ng:
    echo    1. Má»Ÿ XAMPP Control Panel
    echo    2. Start Apache vÃ  MySQL
    echo    3. Cháº¡y láº¡i script nÃ y
    echo.
    echo ğŸ”§ Hoáº·c cháº¡y: setup-xampp.bat Ä‘á»ƒ Ä‘Æ°á»£c hÆ°á»›ng dáº«n chi tiáº¿t
    echo.
    set /p choice="Báº¡n cÃ³ muá»‘n má»Ÿ hÆ°á»›ng dáº«n setup XAMPP? (y/n): "
    if /i "!choice!"=="y" call setup-xampp.bat
    pause
    exit /b 1
)
echo âœ… MySQL Server Ä‘ang cháº¡y

echo [4/4] Kiá»ƒm tra build...
if not exist "build\BookstoreApp.class" (
    echo âš ï¸  Class files chÆ°a Ä‘Æ°á»£c build
    echo ğŸ”¨ Äang build...
    javac -cp "lib\mysql-connector-j-8.0.33.jar" -d build BookstoreApp.java
    if %errorlevel% neq 0 (
        echo âŒ Lá»—i build!
        pause
        exit /b 1
    )
    echo âœ… Build thÃ nh cÃ´ng
) else (
    echo âœ… Build OK
)

echo.
echo ========================================================================
echo ğŸš€ KHá»I Äá»˜NG á»¨NG Dá»¤NG
echo ========================================================================
echo.
echo ï¿½ Äang má»Ÿ giao diá»‡n Ä‘Äƒng nháº­p...
echo ğŸ”— Káº¿t ná»‘i MySQL XAMPP localhost:3306
echo.

REM Cháº¡y á»©ng dá»¥ng
java -cp "build;lib\mysql-connector-j-8.0.33.jar" BookstoreApp

REM Kiá»ƒm tra káº¿t quáº£
if %errorlevel%==0 (
    echo.
    echo âœ… á»¨ng dá»¥ng Ä‘Ã£ hoáº¡t Ä‘á»™ng thÃ nh cÃ´ng!
) else (
    echo.
    echo âŒ Lá»—i cháº¡y á»©ng dá»¥ng!
    echo.
    echo ğŸ” CÃ¡c nguyÃªn nhÃ¢n cÃ³ thá»ƒ:
    echo    1. Database 'bookstore' chÆ°a Ä‘Æ°á»£c táº¡o
    echo    2. XAMPP MySQL Ä‘Ã£ dá»«ng
    echo    3. Port 3306 bá»‹ cháº·n
    echo    4. Dá»¯ liá»‡u chÆ°a Ä‘Æ°á»£c import
    echo.
    echo ï¿½ Giáº£i phÃ¡p:
    echo    ğŸ“‹ Cháº¡y: setup-xampp.bat Ä‘á»ƒ setup database
    echo    ğŸ”§ Kiá»ƒm tra XAMPP Control Panel
    echo    ğŸŒ Má»Ÿ phpMyAdmin: http://localhost/phpmyadmin
    echo.
    pause
)

echo.
echo ğŸ¯ TÃ i khoáº£n demo:
echo    ğŸ‘¤ admin/admin123     - Quáº£n trá»‹ viÃªn
echo    ğŸ‘¤ user/user123       - NgÆ°á»i dÃ¹ng  
echo    ğŸ‘¤ manager/manager123 - NhÃ¢n viÃªn
echo.
echo ğŸ‘‹ Cáº£m Æ¡n báº¡n Ä‘Ã£ sá»­ dá»¥ng Bookstore Management!
pause
